import tools from 'satanic'
import { config } from './config.mjs'
// import {
//     getCitiesKeyboard,
//     getRegionsKeyboard
// } from './regions.mjs'

const ageGroups = {
    female: [
        [[12, 13], [12, 14]],
        [[14, 15], [13, 17]],
        [[16, 17], [15, 19]],
        [[18, 19], [17, 24]],
        [[20, 21], [19, 25]],
        [[22, 24], [21, 29]],
        [[25, 26], [24, 31]],
        [[27, 28], [26, 34]],
        [[29, 30], [28, 38]],
        [[31, 32], [30, 42]],
        [[32, 9999], [32, 9999]]
    ],
    male: [
        [[14, 15], [13, 16]],
        [[15, 17], [14, 17]],
        [[17, 18], [15, 19]],
        [[19, 20], [16, 21]],
        [[21, 24], [17, 25]],
        [[25, 26], [18, 27]],
        [[27, 29], [21, 31]],
        [[30, 32], [24, 34]],
        [[33, 36], [26, 38]],
        [[37, 48], [33, 50]],
        [[48, 9999], [48, 9999]]
    ]
}

const reportReasons = {
    'nsfw': 'üîû –ú–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö',
    'sale': 'üí∞ –ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–ª–∏ —É—Å–ª—É–≥',
    'ignor': 'üò¥ –ù–µ –æ—Ç–≤–µ—á–∞–µ—Ç',
    'other': '‚ùì –î—Ä—É–≥–æ–µ',
    'none': '‚úñÔ∏è –û—Ç–º–µ–Ω–∏—Ç—å'
}

const texts = {
    greeting: 'üëã –ü—Ä–∏–≤–µ—Ç',
    mainMenu: '1. –°–º–æ—Ç—Ä–µ—Ç—å –∞–Ω–∫–µ—Ç—ã.\n2. –ú–æ—è –∞–Ω–∫–µ—Ç–∞.\n3. –Ø –±–æ–ª—å—à–µ –Ω–µ —Ö–æ—á—É –Ω–∏–∫–æ–≥–æ –∏—Å–∫–∞—Ç—å.\n***\n4. –ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π - –ø–æ–ª—É—á–∏ –±–æ–ª—å—à–µ –ª–∞–π–∫–æ–≤ üòé.',
    greetingAgain: 'üëã –ü—Ä–∏–≤–µ—Ç —Å–Ω–æ–≤–∞\n1. –°–º–æ—Ç—Ä–µ—Ç—å –∞–Ω–∫–µ—Ç—ã.\n2. –ú–æ—è –∞–Ω–∫–µ—Ç–∞.\n3. –Ø –±–æ–ª—å—à–µ –Ω–µ —Ö–æ—á—É –Ω–∏–∫–æ–≥–æ –∏—Å–∫–∞—Ç—å.\n***\n4. –ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π - –ø–æ–ª—É—á–∏ –±–æ–ª—å—à–µ –ª–∞–π–∫–æ–≤ üòé.',
    waitingLikes: '–ü–æ–¥–æ–∂–¥–µ–º, –ø–æ–∫–∞ –∫—Ç–æ-—Ç–æ —É–≤–∏–¥–∏—Ç —Ç–≤–æ—é –∞–Ω–∫–µ—Ç—É',
    mutualSympathy: (userId, name) => `–ï—Å—Ç—å –≤–∑–∞–∏–º–Ω–∞—è —Å–∏–º–ø–∞—Ç–∏—è! –î–æ–±–∞–≤–ª—è–π –≤ –¥—Ä—É–∑—å—è üëâ <a href="tg://user?id=${userId}">${name}</a>`,
    likeWhileBusy: '–ö–æ–º—É-—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å —Ç–≤–æ—è –∞–Ω–µ–∫—Ç–∞!\n–ó–∞–∫–∞–Ω—á–∏–≤–∞–π —Å –≤–æ–ø—Ä–æ—Å–æ–º –≤—ã—à–µ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫—Ç–æ —ç—Ç–æ',
    like: (stringGender, pronoun) => `–¢—ã –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è 1 ${stringGender}, –ø–æ–∫–∞–∑–∞—Ç—å ${pronoun}?\n\n1. –ü–æ–∫–∞–∑–∞—Ç—å.\n2. –ù–µ —Ö–æ—á—É –±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–æ —Å–º–æ—Ç—Ä–µ—Ç—å.`,
    form: {
        age: '–°–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?',
        gender: '–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø–æ–ª:',
        searchGender: '–ö—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω?',
        city: '–ò–∑ –∫–∞–∫–æ–≥–æ —Ç—ã –≥–æ—Ä–æ–¥–∞?',
        name: '–ö–∞–∫ —Ç–µ–±—è –Ω–∞–∑—ã–≤–∞—Ç—å?',
        bio: '–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ –∏ –∫–æ–≥–æ —Ö–æ—á–µ—à—å –Ω–∞–π—Ç–∏, —á–µ–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å –∑–∞–Ω—è—Ç—å—Å—è. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ª—É—á—à–µ –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ç–µ–±–µ –∫–æ–º–ø–∞–Ω–∏—é.',
        media: '–ü—Ä–∏—à–ª–∏ —Ñ–æ—Ç–æ –∏–ª–∏ –∑–∞–ø–∏—à–∏ –≤–∏–¥–µ–æ (–¥–æ 15 —Å–µ–∫.) - –µ–≥–æ –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ —Ç–≤–æ–µ–π –∞–Ω–∫–µ—Ç—ã.',
        form: '–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–≤–æ—è –∞–Ω–∫–µ—Ç–∞:'
    },
    errors: {
        noMoreForms: 'üí¢ ',
        oldButton: 'üí¢ –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —Å–µ–π—á–∞—Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ.',
        number: 'üí¢ –í–≤–µ–¥–∏—Ç–µ <u>—á–∏—Å–ª–æ</u>.',
        gender: 'üí¢ –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≥–µ–Ω–¥–µ—Ä. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Telegram.',
        city: 'üí¢ –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞.',
        name: 'üí¢ –í–≤–µ–¥–∏—Ç–µ –∏–º—è.',
        bio: 'üí¢ –í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ <u>–¥–æ 100</u> —Å–∏–º–≤–æ–ª–æ–≤.',
        media: 'üí¢ –ü—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ (<u>–Ω–µ</u> –æ—Ç–º–µ—á–∞–π—Ç–µ –æ–ø—Ü–∏—é "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ —Ñ–∞–π–ª").',
        form: 'üí¢ –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Telegram.',
        noForms: 'üí¢ –ù–æ–≤—ã—Ö –∞–Ω–∫–µ—Ç –ø–æ–∫–∞ –Ω–µ—Ç.',
        likesLimit: 'üí¢ –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–∞–π–∫–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è - —Å—Ç–∞–≤—å –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–º, –∫—Ç–æ —Ç–µ–±–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—Ä–∞–≤–∏—Ç—Å—è.\n–ó–∞–≥–ª—è–Ω–∏ –∫ –Ω–∞–º –ø–æ–∑–∂–µ'
    },
    success: {
        bio: '–¢–µ–∫—Å—Ç –∞–Ω–∫–µ—Ç—ã —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.',
        media: '–ú–µ–¥–∏–∞—Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.',
        report: '–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.'
    },
    report: (userId, targetUserId, reason) => `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å <code>${userId}</code> –ø–æ–∂–∞–ª–æ–≤–∞–ª—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <code>${targetUserId}</code> –ø–æ –ø—Ä–∏—á–∏–Ω–µ ${reportReasons[reason]}`,
    bye: 'üëã',
    pro: `–¢—ã –ø–æ–ª—É—á–∏–ª(-–∞) +7 –¥–Ω–µ–π PRO –∞–∫–∫–∞—É–Ω—Ç–∞`,
    proEnded: `PRO –∞–∫–∫–∞—É–Ω—Ç –∑–∞–∫–æ–Ω—á–∏–ª—Å—è`,
    finish: '–ë—ã–ª —Ä–∞–¥ –ø–æ–º–æ—á—å! –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è, –∫–æ–≥–¥–∞ —Å–Ω–æ–≤–∞ –∑–∞—Ö–æ—á–µ—à—å –Ω–∞–π—Ç–∏ –∫–æ–≥–æ-–Ω–∏–±—É–¥—å: /start',
    referal: (userId, name) => `<a href="tg://user?id=${userId}">${name}</a> –∑–∞—à–µ–ª –≤ –±–æ—Ç–∞ –ø–æ —Ç–≤–æ–µ–π —Å—Å—ã–ª–∫–µ!`,
    bonus: (total, total7, bonus) => `–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∏ –±–æ–ª—å—à–µ –ª–∞–π–∫–æ–≤!\n\n–¢–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n–í—Å–µ–≥–æ –ø—Ä–∏—à–ª–æ: ${total}\n–ü—Ä–∏—à–ª–æ –∑–∞ 7 –¥–Ω–µ–π: ${total7}\n–ë–æ–Ω—É—Å –∫ —Å–∏–ª–µ –∞–Ω–∫–µ—Ç—ã: ${bonus}%\n${Math.abs(total - 10) > 0 ? `–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è PRO –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å: ${Math.abs(total - 10)}` : ''}\n\n–ü–µ—Ä–µ—à–ª–∏ –¥—Ä—É–∑—å—è–º –∏–ª–∏ —Ä–∞–∑–º–µ—Å—Ç–∏ –≤ —Å–≤–æ–∏—Ö —Å–æ—Ü—Å–µ—Ç—è—Ö.\n–í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞ üëá`,
    referalMessage: userId => `–ë–æ—Ç –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –≤ Telegram! –ù–∞–π–¥–µ—Ç –¥—Ä—É–∑–µ–π –∏–ª–∏ –¥–∞–∂–µ –ø–æ–ª–æ–≤–∏–Ω–∫—Éüë´\nüëâ https://t.me/${config.botName}?start=inv${userId}`,
    edit: '1. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É –∑–∞–Ω–æ–≤–æ.\n2. –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ.\n3. –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –∞–Ω–∫–µ—Ç—ã.\n4. –°–º–æ—Ç—Ä–µ—Ç—å –∞–Ω–∫–µ—Ç—ã\n'
}

const buttons = {
    mainMenu: simple([
        ['1üöÄ', '2', '3', '4']
    ]),
    form: {
        gender: simple([
            ['–Ø –¥–µ–≤—É—à–∫–∞', '–Ø –ø–∞—Ä–µ–Ω—å']
        ], true),
        searchGender: simple([
            ['–î–µ–≤—É—à–∫–∏', '–ü–∞—Ä–Ω–∏'],
            ['–í—Å–µ —Ä–∞–≤–Ω–æ']
        ], true),
        // region: getRegionsKeyboard(),
        // city: region => getCitiesKeyboard,
        bio: simple([
            ['–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å']
        ], true),
        form: simple([
            ['–î–∞', '–ò–∑–º–µ–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É']
        ], true)
    },
    hide: {
        reply_markup: {
            remove_keyboard: true
        }
    },
    review: simple([
        ['‚ù§Ô∏è', 'üëé', 'üí§']
    ], true),
    edit: numbers(4),
    respond: numbers(2),
    report: inline([
        [['‚ö†Ô∏è –ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è', 'reportList']]
    ]),
    reportList: inline(
        Object
            .entries(reportReasons)
            .map(button => [[button[1], `report_${button[0]}`]])
    )
}


function numbers(amount) {
    return simple([
        new Array(amount)
            .fill()
            .map((_, i) => `${i + 1}`)
    ], true)
}

function simple(keys, onetime) {
    let keyboard = tools.Markup
        .keyboard(keys)
        .resize()
    keyboard = onetime ? keyboard.oneTime() : keyboard
    return Object.assign(
        { parse_mode: 'HTML' },
        keyboard.extra()
    )
}

function inline(keyboard) {
    return Object.assign(
        { parse_mode: 'HTML' },
        tools.Markup
            .inlineKeyboard(
                keyboard.map(
                    row => row.map(
                        key => tools.Markup.callbackButton(...key)
                    )
                )
            )
            .extra()
    )
}

export {
    texts,
    buttons,
    simple,
    inline,
    ageGroups,
    reportReasons
}